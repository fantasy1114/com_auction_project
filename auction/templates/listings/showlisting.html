{% extends 'base.html' %}

{% import "bootstrap/wtf.html" as wtf %}
{% block content %}
<main style="margin-top: 100px;">

    <div class="container">
      <h2 class="responsive-heading my-4 text-center text-md-left">{{listing.title}}</h2>
      <div class="row">
        <div class="col-md-6">
          <img class="img-fluid"
            src="https://images.unsplash.com/photo-1585247226801-bc613c441316?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=80"
            alt="">

          <div class="row my-3">
            <div class="col-sm-6 col-md-6 col-lg-3 mb-4">
              <a href="#">
                <img class="img-fluid"
                  src="https://images.unsplash.com/photo-1547731030-cd126f44e9c5?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=80"
                  alt="">
              </a>
            </div>

            <div class="col-sm-6 col-md-6 col-lg-3 mb-4">
              <a href="#">
                <img class="img-fluid"
                  src="https://images.unsplash.com/photo-1521572139070-e9abc6eeb045?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=80"
                  alt="">
              </a>
            </div>

            <div class="col-sm-6 col-md-6 col-lg-3 mb-4">
              <a href="#">
                <img class="img-fluid"
                  src="https://images.unsplash.com/photo-1569770218135-bea267ed7e84?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60"
                  alt="">
              </a>
            </div>

            <div class="col-sm-6 col-md-6 col-lg-3 mb-4">
              <a href="#">
                <img class="img-fluid"
                  src="https://images.unsplash.com/photo-1590758122144-da8c56ee64ff?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=80"
                  alt="">
              </a>
            </div>
          </div>
        </div>

        <div class="col-md-6">

          <div class="text-center text-md-left">
            <p class="d-block mb-4"><i class="fas fa-check-circle text-success"></i><span class="text-muted">
                Status:</span><strong> {{listing.status}}</strong></p>
            <p class="d-block mb-4"><i class="fas fa-user blue-text"></i><span class="text-muted">
                Seller:</span><strong> {{listing.seller}}</strong></p>
            <p class="d-block mb-4"><i class="fas fa-clock text-warning"></i><span class="text-muted">
                End Date:</span><strong> {{listing.end_date}}</strong></p>
            <p class="d-block mb-4"><i class="fas fa-shield-alt text-info"></i><span class="text-muted">
                Condition:</span><strong> {{listing.condition}}</strong></p>
            <p class="d-block mb-4"><i class="fas fa-sort-numeric-up-alt text-muted"></i><span class="text-muted"> Total
                Bids:</span><strong> {{listing.total_bids}}</strong></p>
            <a class="btn btn-blue mb-3" href="#" role="button"><i class="fas fa-eye"></i> Watch List</a>
          </div>

          <!-- Place Bid Box-->
          <div class="row border py-3 shadow">

            <!-- Left Side -->
            <div class="col-lg-3 text-center">
              <p>Current Bid</p>
              <h4 class="orange-icon">${{listing.current_bid}}</h4>
            </div>

            <!-- Right Side -->
            <div class="col-lg-9 d-flex align-items-center justify-content-center border-left">

              <div class="input-group px-3">
                <input type="text" class="form-control" placeholder="Bid Amount..">
                <div class="input-group-append">
                  <button class="btn btn-blue" type="button">Place Bid</button>
                </div>
              </div>

            </div>
          </div>

          <div class="row card bg-light mt-3 text-muted">
            <div class="card-header">Description</div>
            <div class="card-body pb-0">
              <p>{{listing.description}}</p>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="reviews-box col-md-12 pr-0">
          <div class="card text-center">

            <div class="card-header">
              <ul class="nav nav-tabs card-header-tabs">
                <li class="nav-item">
                  <a href="#itemdetails" class="nav-link active" role="tab" data-toggle="tab">Item Details</a>
                </li>
                <li class="nav-item">
                  <a href="#reviews" class="nav-link" role="tab" data-toggle="tab">Reviews</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#reviewsModal" data-toggle="modal" data-target="#reviewsModal">Post
                    Review</a>
                </li>
              </ul>
            </div>

            <div class="tab-content">
              <div role="tabpanel1" class="card-body tab-pane text-left active" id="itemdetails">
                <p>i5 processor</p>
                <p>256GB storage</p>
                <p>16GB RAM</p>
              </div>
  
              <div role="tabpanel1" class="card-body tab-pane text-left" id="reviews">
                {% for review in listing.reviews %} 
                <div class="mb-4 border-bottom">
                  <i class="fas fa-star orange-icon"></i>
                  <i class="fas fa-star orange-icon"></i>
                  <i class="fas fa-star orange-icon"></i>
                  <i class="fas fa-star orange-icon"></i>
                  <i class="far fa-star orange-icon"></i>
                  <h5 class="review-title mt-2">{{review.title}}</h5>
                  <p>{{review.user}}</p>
                  <p class="review-description">{{review.feedback}}</p>
                </div>
                {% endfor %}
              </div>
            </div>

            

            <!--Modal for posting reviews-->
            <div class="modal fade" id="reviewsModal" tabindex="-1" role="dialog"
              aria-labelledby="reviewModal aria-hidden=" true">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title">Leave a review</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body text-left">
                    
                    {{wtf.quick_form(form, "/listings/{0}/review".format(1))}}

                  </div>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>
  </main>
{% endblock %}